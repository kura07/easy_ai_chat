<!DOCTYPE html>
<html>

<head>
  <title>簡易AIチャット</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
  <link rel="stylesheet" href="chat.css">
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/turndown/dist/turndown.min.js"></script>
</head>

<body>

  <section id="chat">
    <template id="template-user">
      <article class="user" data-role="user" contenteditable="true"></article>
    </template>
    <template id="template-model">
      <article class="model" data-role="model" data-markdown="" contenteditable="true"></article>
    </template>
  </section>

  <section id="input">
    <article><textarea id="input-user" placeholder="ユーザーの入力"></textarea></article>
    <article><textarea id="input-model" placeholder="モデルの出力の固定"></textarea></article>
    <button id="send" disabled>↑</button>
  </section>

  <aside id="menu">
    <details>
      <summary>☰ v0.011</summary>
      <nav>
        <ul>
          <li id="clear_all_local_storage" ontouchstart="">clear all localStorage
          <li id="set_gemini_api_key" ontouchstart="">set Gemini API key
          <li id="set_cloudinary_api_key" ontouchstart="">set Cloudinary API key
          <li id="check_local_stotage" ontouchstart="">check localStorage
        </ul>
      </nav>
    </details>

  </aside>
  <script>
    /** @param {string[]} sources */
    function insertScriptInOrder(sources) {
      const loadNext = i => {
        const script = document.createElement("script");
        script.src = `${sources[i]}?t=${Date.now()}`;
        if (i < sources.length - 1) script.onload = () => loadNext(i + 1); // 次のスクリプトを読み込む
        document.body.appendChild(script);
      };
      loadNext(0);
    }
    insertScriptInOrder(["library.js", "chat.js"]);
  </script>

</body>

</html>